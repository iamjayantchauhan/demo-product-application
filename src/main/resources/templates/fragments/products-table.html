<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
</head>

<body>
    <!-- Products Table Fragment -->
    <div th:fragment="products-table">
        <style>
            .btn-info {
                background-color: var(--wa-color-info);
                color: var(--wa-color-white);
            }

            .btn-info:hover {
                background-color: #138496;
                transform: translateY(-1px);
            }
        </style>
        <div th:if="${#lists.isEmpty(products)}" class="empty-state">
            <i class="fas fa-box-open fa-3x"
                style="color: var(--wa-color-gray-400); margin-bottom: var(--wa-spacing-md);"></i>
            <h3>No products found</h3>
            <p>No products are currently available in the database</p>
        </div>

        <table th:unless="${#lists.isEmpty(products)}" class="table">
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Title</th>
                    <th>Price</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${products}">
                    <td>
                        <img th:if="${product.imageUrl != null}" th:src="${product.imageUrl}" th:alt="${product.title}"
                            class="product-image"
                            onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'60\' height=\'60\' viewBox=\'0 0 24 24\' fill=\'%23dee2e6\'%3E%3Cpath d=\'M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\'/%3E%3C/svg%3E'">
                        <div th:unless="${product.imageUrl != null}"
                            style="width: 60px; height: 60px; background-color: var(--wa-color-gray-200); border-radius: var(--wa-border-radius); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-image" style="color: var(--wa-color-gray-400);"></i>
                        </div>
                    </td>
                    <td>
                        <strong th:text="${product.title}">Product Title</strong>
                    </td>
                    <td>
                        <span class="price" th:text="'$' + ${#numbers.formatDecimal(product.price, 1, 2)}">$0.00</span>
                    </td>
                    <td>
                        <div th:if="${product.description != null}"
                            th:text="${#strings.abbreviate(product.description, 100)}" style="max-width: 300px;">
                            Description
                        </div>
                        <span th:unless="${product.description != null}"
                            style="color: var(--wa-color-gray-500); font-style: italic;">No description</span>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-primary"
                            th:attr="hx-get=@{'/products/' + ${product.id} + '/edit'}" hx-target="#edit-modal"
                            hx-trigger="click" style="margin-right: var(--wa-spacing-xs);">
                            <i class="fas fa-edit"></i>
                            Quick Edit
                        </button>
                        <a th:href="@{'/products/' + ${product.id} + '/edit-page'}" class="btn btn-sm btn-info"
                            style="margin-right: var(--wa-spacing-xs);">
                            <i class="fas fa-external-link-alt"></i>
                            Full Edit
                        </a>
                        <button class="btn btn-sm btn-danger"
                            th:attr="onclick=|openDeleteDialog(${product.id}, '${product.title}')|">
                            <i class="fas fa-trash"></i>
                            Delete
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div th:unless="${#lists.isEmpty(products)}"
            style="margin-top: var(--wa-spacing-lg); text-align: center; color: var(--wa-color-gray-600);">
            <i class="fas fa-info-circle"></i>
            <span>Showing </span>
            <strong th:text="${#lists.size(products)}">0</strong>
            <span> products</span>
        </div>
    </div>
</body>

</html>